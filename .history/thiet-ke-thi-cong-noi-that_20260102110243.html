<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./styles/swiper-bundle.min.css" />
  <link rel="stylesheet" href="./styles/aos.css" />
  <link rel="stylesheet" href="./styles/odometer-theme-default.css" />
  <link rel="stylesheet" href="./styles/styles.css" />
  <link rel="stylesheet" href="./styles/cta-style.css" />
  <link rel="stylesheet" href="./styles/output.css?v=1" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/nouislider@15.6.1/dist/nouislider.min.css" rel="stylesheet">

  <title>Thiết kế thi công nội thất</title>

  <style>
    .noUi-handle {
      width: 12px;
      height: 12px;
      border-radius: 9999px;
      border: 1px solid #1e3a8a;
      background: white;
      box-shadow: 0 0 0 2px #eff6ff;
      transition: all 0.3s ease;
    }

    .noUi-handle:hover {
      background: #e0f2fe;
    }

    .noUi-connect {
      background: linear-gradient(to right, #1e3a8a, #2563eb);
      border-radius: 9999px;
    }
  </style>
</head>

<body class="relative">
  <!-- Header -->
  <div id="header" class="sticky left-0 top-0 z-50 md:block"></div>
  <button class="fixed md:hidden" style="top: 18px; right: 18px; z-index: 999;" type="button"
    data-drawer-target="responsive-menu" data-drawer-show="responsive-menu" aria-controls="responsive-menu">
    <svg class="size-8" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path fill="none" d="M0 0h24v24H0V0z"></path>
      <path d="M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z">
      </path>
    </svg>
  </button>

  <!-- Navbar ended -->
  <section class="bg-primary-10">
    <div class="h-auto w-full bg-cover bg-center bg-no-repeat pb-10 pt-10"
      style="background-image: url('assets/images/layer.svg')">
      <div class="container flex h-[170px] flex-col items-center justify-center sm:h-[200px] md:h-[250px]"
        data-aos="fade-up">
        <h1 id="pageTitle" class="common-hero-heading">Thiết kế thi công nội thất</h1>

        <!-- Breadcrumb -->
        <div id="breadCrumb" data-aos="fade-left" data-aos-anchor="#example-anchor" data-aos-offset="500"
          data-aos-duration="500" class="flex" aria-label="Breadcrumb">
        </div>
      </div>
      <!-- Mega search -->
      <div id="mega-search"></div>
    </div>
  </section>

  <!-- Rating start -->
  <section id="ratingStar" data-aos="fade-right"></section>

  <!-- Không có kn -->
  <section id="tktkntNoExp"></section>

  <!-- Lời giải thích -->
  <section id="tktkntAnswer" class="bg-slate-50 mt-8"></section>

  <!-- Mất động lực -->
  <div class="relative bg-blue-900">
    <section id="demotivated"></section>
  </div>

  <!-- Quy trình làm việc -->
  <section id="tktkntWorkProcess"></section>
  <section id="workflow"></section>

  <!-- ProjectDone -->
  <section id="tktkntProjectDone" class="bg-slate-50"></section>

  <!-- Thông tin chung -->
  <section id="tktkntGeneralInformation"></section>

  <!-- Các gói đăng ký -->
  <div class="bg-blue-900 mt-8">
    <section id="tktkntPackages"></section>
  </div>

  <!-- User Reviews Start -->
  <section id="usersReview"></section>

  <!-- Đăng ký thiết kế -->
  <section id="tktkntSignToDesign" class="bg-slate-50"></section>

  <!-- Gặp gỡ đội ngũ tư vấn -->
  <section id="consultingTeam"></section>

  <!-- Liên hệ -->
  <section id="contact2"></section>

  <!-- Banner bottom -->
  <section id="tktkntBannerBottom"></section>

  <!-- Responsive menu -->
  <section id="responseMenu"></section>

  <!-- footer -->
  <div id="footer"></div>

  <!-- thư viện -->
  <!-- Scripts -->
  <script src="./js/breadcrumb.js"></script>
  <script src="js/fontawesome.min.js"></script>
  <script src="js/flowbite.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/odometer.js"></script>
  <script src="js/swiper-bundle.min.js"></script>
  <script src="js/index.js"></script>
  <script src="js/users-rating-swiper.js"></script>
  <script src="js/include.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nouislider@15.6.1/dist/nouislider.min.js"></script>

  <script>
    AOS.init();
  </script>

  <script>
    function megaSearchEvent() {
      const slider = document.getElementById('price-slider');
      const minDisplay = document.getElementById('min-price-display');
      const maxDisplay = document.getElementById('max-price-display');
      const minInput = document.getElementById('min-price-input');
      const maxInput = document.getElementById('max-price-input');
      // Giá tính theo VND
      let MIN_PRICE = 20000000; // 20 triệu
      let MAX_PRICE = 500000000; // 500 triệu

      function formatVND(value) {
        // Đổi sang "triệu"
        let trieu = Math.round(value / 1000000);
        return trieu.toLocaleString('vi-VN') + ' triệu';
      }

      noUiSlider.create(slider, {
        start: [MIN_PRICE, MIN_PRICE], // điểm bắt đầu
        connect: true,
        step: 1000000, // bước 1 triệu
        range: {
          min: MIN_PRICE,
          max: MAX_PRICE,
        },
      });

      slider.noUiSlider.on('update', function (values, handle) {
        let minVal = Math.round(values[0]);
        let maxVal = Math.round(values[1]);

        minDisplay.textContent = formatVND(minVal);
        maxDisplay.textContent = formatVND(maxVal);

        // Gán vào input hidden để gửi form
        minInput.value = minVal;
        maxInput.value = maxVal;
      });

      // Area Slider
      const areaSlider = document.getElementById('area-slider');
      const minAreaDisplay = document.getElementById('min-area-display');
      const maxAreaDisplay = document.getElementById('max-area-display');
      const minAreaInput = document.getElementById('min-area-input');
      const maxAreaInput = document.getElementById('max-area-input');
      let MIN_AREA = 20; // 20 m2
      let MAX_AREA = 50; // 500 m2

      if (areaSlider) {
        noUiSlider.create(areaSlider, {
          start: [MIN_AREA, MIN_AREA],
          connect: true,
          step: 10,
          range: {
            min: MIN_AREA,
            max: MAX_AREA,
          },
        });

        areaSlider.noUiSlider.on('update', function (values, handle) {
          let minVal = Math.round(values[0]);
          let maxVal = Math.round(values[1]);

          minAreaDisplay.textContent = minVal + ' m²';
          maxAreaDisplay.textContent = maxVal + ' m²';

          minAreaInput.value = minVal;
          maxAreaInput.value = maxVal;
        });
      }

      // Floor Slider
      const floorSlider = document.getElementById('floor-slider');
      const minFloorDisplay = document.getElementById('min-floor-display');
      const maxFloorDisplay = document.getElementById('max-floor-display');
      const minFloorInput = document.getElementById('min-floor-input');
      const maxFloorInput = document.getElementById('max-floor-input');

      let MIN_FLOOR = 1;
      let MAX_FLOOR = 50;

      if (floorSlider) {
        noUiSlider.create(floorSlider, {
          start: [MIN_FLOOR, MIN_FLOOR],
          connect: true,
          step: 1,
          range: {
            min: MIN_FLOOR,
            max: MAX_FLOOR,
          },
        });

        floorSlider.noUiSlider.on('update', function (values, handle) {
          let minVal = Math.round(values[0]);
          let maxVal = Math.round(values[1]);

          minFloorDisplay.textContent = minVal;
          maxFloorDisplay.textContent = maxVal;

          minFloorInput.value = minVal;
          maxFloorInput.value = maxVal;
        });
      }

      // Capacity Slider
      const capacitySlider = document.getElementById('capacity-slider');
      const minCapacityDisplay = document.getElementById('min-capacity-display');
      const maxCapacityDisplay = document.getElementById('max-capacity-display');
      const minCapacityInput = document.getElementById('min-capacity-input');
      const maxCapacityInput = document.getElementById('max-capacity-input');

      let MIN_PEOPLE = 1;
      let MAX_PEOPLE = 100;

      if (capacitySlider) {
        noUiSlider.create(capacitySlider, {
          start: [MIN_PEOPLE, MIN_PEOPLE],
          connect: true,
          step: 1,
          range: {
            min: MIN_PEOPLE,
            max: MAX_PEOPLE,
          },
        });

        capacitySlider.noUiSlider.on('update', function (values, handle) {
          let minVal = Math.round(values[0]);
          let maxVal = Math.round(values[1]);

          minCapacityDisplay.textContent = minVal;
          maxCapacityDisplay.textContent = maxVal;

          minCapacityInput.value = minVal;
          maxCapacityInput.value = maxVal;
        });
      }

      // Toggle search form collapse/expand
      const toggleBtn = document.getElementById('toggle-search-btn');
      const searchFormContent = document.getElementById('search-form-content');
      const toggleText = document.getElementById('toggle-search-text');
      const toggleIcon = document.getElementById('toggle-search-icon');

      if (toggleBtn && searchFormContent) {
        toggleBtn.addEventListener('click', function () {
          // Check if currently hidden
          var isHidden =
            searchFormContent.classList.contains('hidden') ||
            searchFormContent.style.display === 'none' ||
            window.getComputedStyle(searchFormContent).display === 'none';

          if (isHidden) {
            // Show the form
            searchFormContent.classList.remove('hidden');
            searchFormContent.style.display = 'grid';
            toggleText.textContent = 'Thu gọn';
            toggleIcon.classList.remove('fa-chevron-down');
            toggleIcon.classList.add('fa-chevron-up');
          } else {
            // Hide the form
            searchFormContent.classList.add('hidden');
            searchFormContent.style.display = 'none';
            toggleText.textContent = 'Mở rộng';
            toggleIcon.classList.remove('fa-chevron-up');
            toggleIcon.classList.add('fa-chevron-down');
          }
        });
      }

      const resetButton = document.getElementById('mega-search-reset-btn');

      resetButton.addEventListener('click', function () {
        slider.noUiSlider.reset();
        areaSlider.noUiSlider.reset();
        floorSlider.noUiSlider.reset();
        capacitySlider.noUiSlider.reset();
      });
    }
    function resetMegaSearchForm() {
      const searchForm = document.getElementById("search-form");
      const resetSearchFormBtn = document.getElementById("mega-search-reset-btn");
      const minPrice = document.getElementById("min-price-input");
      const maxPrice = document.getElementById("max-price-input");
      const minArea = document.getElementById("min-area-input");
      const maxArea = document.getElementById("max-area-input");
      const minFloor = document.getElementById("min-floor-input");
      const maxFloor = document.getElementById("max-floor-input");
      const minCapacity = document.getElementById("min-capacity-input");
      const maxCapacity = document.getElementById("max-capacity-input");

      resetSearchFormBtn.addEventListener("click", () => {
        searchForm.reset();
        minPrice.value = "20000000";
        maxPrice.value = "20000000";
        minArea.value = "20";
        maxArea.value = "20";
        minFloor.value = "1";
        maxFloor.value = "1"
        minCapacity.value = "1";
        maxCapacity.value = "1";
      })
    }
    function setCounter() {
      class Counter {
        constructor(config) {
          this.selector = config.selector;
          this.element = null;
          this.count = 0;
          this.countEnd = config.countEnd;
          this.step = config.step;
          this.intervalMS = config.intervalMS;
          this.init();
        }

        getElement() {
          this.element = document.querySelector(this.selector);
        }

        startCounter() {
          this.element.innerHTML = `${this.count}+`;
          setTimeout(() => {
            if (this.count < this.countEnd) {
              this.count += this.step;
              this.startCounter();
            }
          }, this.intervalMS)
        }

        init() {
          this.getElement();
          this.startCounter();
        }
      }

      const yearElement = {
        selector: "#yearCounter",
        countEnd: 10,
        step: 1,
        intervalMS: 50
      }
      const projectElement = {
        selector: "#projectCounter",
        countEnd: 520,
        step: 2,
        intervalMS: 1
      }
      const peopleElement = {
        selector: "#peopleCounter",
        countEnd: 75,
        step: 1,
        intervalMS: 30
      }

      new Counter(yearElement);
      new Counter(projectElement);
      new Counter(peopleElement);
    }
    document.addEventListener("DOMContentLoaded", () => {
      includeHTML("#header", "./partials/common/header.html");
      includeHTML("#breadCrumb", "./partials/common/bread-crumb.html", initBreadcrumb);
      const loads = [
        includeHTML("#mega-search", "./partials/detail/search-mega.html"),
        includeHTML("#tktkntGeneralInformation", "./partials/tk-tk-nt/tktknt-general-inforamtion.html"),
      ]
      Promise.all(loads).then(() => {
        megaSearchEvent();
        resetMegaSearchForm();
        setCounter();
      })
      includeHTML("#ratingStar", "./partials/common/rating-star.html");
      includeHTML("#usersReview", "./partials/home/users-reviews.html");
      includeHTML("#tktkntNoExp", "./partials/tk-tk-nt/tktknt-noexp.html");
      includeHTML("#tktkntAnswer", "./partials/tk-tk-nt/tktknt-answer.html");
      includeHTML("#demotivated", "./partials/tk-tk-nt/tktknt-demotivated.html");
      includeHTML("#tktkntProjectDone", "./partials/tk-tk-nt/tktknt-project-done.html");
      includeHTML("#tktkntWorkProcess", "./partials/tk-tk-nt/tktknt-work-process.html");
      includeHTML("#tktkntSignToDesign", "./partials/tk-tk-nt/tktknt-sign-to-design.html");
      includeHTML("#tktkntPackages", "./partials/tk-tk-nt/tktknt-packages.html");
      includeHTML("#tktkntBannerBottom", "./partials/tk-tk-nt/tktknt-bottom-banner.html");
      includeHTML("#consultingTeam", "./partials/common/consulting-team.html");
      includeHTML("#contact2", "./partials/common/contact-2.html");
      includeHTML("#responseMenu", "./partials/common/responseMenu.html");
      includeHTML("#footer", "./partials/common/footer.html");
    });
  </script>

  <script>
    AOS.init({
      delay: 0,
      duration: 1000,
    });

    // reviews
    const swiper = new Swiper('.h2-reviews-swiper', {
      slidesPerView: 3,
      pagination: {
        el: '.h2-reviews-swiper-pagination',
        clickable: true,
        dynamicBullets: true,
      },
      autoplay: {
        delay: 2500,
        disableOnInteraction: false,
      },
      breakpoints: {
        0: {
          slidesPerView: 1,
          spaceBetween: 10,
        },
        320: {
          slidesPerView: 2,
          spaceBetween: 10,
        },
        640: {
          slidesPerView: 2,
          spaceBetween: 15,
        },
        768: {
          slidesPerView: 3,
          spaceBetween: 20,
        },
      },
    });

    // Team Swiper
    function initTeamSwiper() {
      const el = document.querySelector('.team-swiper');

      if (!el) return;

      // chống init trùng
      if (el.classList.contains('swiper-initialized')) return;

      new Swiper(el, {
        slidesPerView: 4,
        spaceBetween: 24,
        // Ensure autoHeight is false (default)
        autoHeight: false,
        // This helper ensures all slides are same height
        watchSlidesProgress: true,
        loop: true,
        speed: 800,
        grabCursor: true,

        autoplay: {
          delay: 3500,
          disableOnInteraction: false,
          pauseOnMouseEnter: true,
        },

        breakpoints: {
          0: { slidesPerView: 1, spaceBetween: 16 },
          640: { slidesPerView: 2, spaceBetween: 20 },
          1024: { slidesPerView: 3, spaceBetween: 24 },
          1280: { slidesPerView: 4, spaceBetween: 24 },
        },
      });
    }
  </script>

  <script>
    function toggleFullInfo() {
      const fullContent = document.getElementById('info-full');
      const gradient = document.getElementById('seo-gradient');
      const btn = document.getElementById('toggleInfoBtn');
      const btnText = document.getElementById('btnText');
      const btnIcon = document.getElementById('btnIcon');

      if (fullContent.classList.contains('hidden')) {
        fullContent.classList.remove('hidden');
        gradient.classList.add('hidden');
        btnText.textContent = 'Thu gọn';
        btnIcon.classList.remove('fa-chevron-down');
        btnIcon.classList.add('fa-chevron-up');
        // Scroll to full content
        fullContent.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      } else {
        fullContent.classList.add('hidden');
        gradient.classList.remove('hidden');
        btnText.textContent = 'Xem thêm';
        btnIcon.classList.remove('fa-chevron-up');
        btnIcon.classList.add('fa-chevron-down');
        // Scroll back to preview
        document.getElementById('info-preview').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    }
  </script>
</body>

</html>